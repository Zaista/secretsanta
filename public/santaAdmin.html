<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Secret santa for my friends">
    <meta name="keywords" content="secret,santa,secretsanta,friends,christmas">
    <meta name="author" content="Jovan Ilic">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Secret Santa</title>
    <link rel="stylesheet" type="text/css" href="css/santaAdmin.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="js/santaAdmin.js"></script>
    <link rel="icon" type="img/ico" href="favicon.ico">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <!-- For facebook crawler -->
    <meta property="og:url" content="http://www.secretsanta.jovanilic.com"/>
    <meta property="og:site_name" content="secretsanta.jovanilic.com"/>
    <meta property="og:title" content="Secret Santa"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Secret Santa for my friends"/>
</head>

<body>
<div id="menu"></div>
<div class="container">

    <div class="row mt-3 mb-3">
        <div class="col-2">
            <nav id="scrollspy" class="h-100 flex-column align-items-stretch pe-4 border-end">
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#item-group-settings">Group settings</a>
                    <a class="nav-link" href="#item-group-rematch">Rematch</a>
                    <a class="nav-link" href="#item-user-access">User access</a>
                    <a class="nav-link" href="#item-user-settings">User settings</a>
                    <a class="nav-link" href="#item-user-pairs">Forbidden pairs</a>
                </nav>
            </nav>
        </div>

        <div class="col-8">
            <div data-bs-spy="scroll" data-bs-target="#scrollspy" style="height: calc(100vh - 96px); overflow: auto;"
                 data-bs-smooth-scroll="true" tabindex="0">
                <div id="item-group-settings">
                    <h4>Group settings</h4>
                    <p>Settings related to the SecretSanta group.</p>
                </div>
                <form id="groupForm">
                    <div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="groupNameSettings" data-onchange="group"
                                   placeholder="Name" required>
                            <label for="groupNameSettings" class="form-label">Group name</label>
                        </div>
                    </div>
                    <div>
                        <div class="form-floating">
                            <select class="form-select" id="emailNotifications" data-onchange="group" aria-label="Email notifications">
                                <option value="true">Enabled</option>
                                <option value="false">Disabled</option>
                            </select>
                            <label for="emailNotifications" class="form-label">Email notifications</label>
                        </div>
                    </div>
                    <div class="mt-3 mb-3">
                        <button id="groupButton" type="submit" class="btn btn-primary" disabled>Save changes</button>
                    </div>
                </form>

                <div id="item-group-rematch" class="mt-5">
                    <h4>SecretSanta pairs</h4>
                    <p>Draft the new SecretSanta pairs for the next year. This will email (if enabled above) all the users in
                        the group that their secret santa pair has been drafted. There is no undoing this action.</p>
                </div>
                <div id="yearAlert" class="alert alert-primary" role="alert"></div>
                <div class="mb-3">
                    <button type="button" id="draft" disabled class="btn btn-primary">Draft</button>
                    <button type="button" id="reveal" disabled class="btn btn-primary">Reveal</button>
                </div>

                <div id="item-user-access" class="mt-5">
                    <h4>User access</h4>
                    <p>Quickly email all users in this group with their credentials, as they tend to forget.</p>
                </div>
                <div class="mb-3">
                    <button type="button" class="btn btn-primary">Email</button>
                </div>

                <div class="mt-5" id="item-user-settings">
                    <h4>User settings</h4>
                    <p>Settings related to the SecretSanta users. Deactivated users will stop being part of the SecretSanta group,
                        they will not be drafted in the next year, and they will stop receiving any emails. 
                        They will however show up in the history. If you wish to change this, please remove them manually
                        from the history page.</p>
                </div>
                <div>
                    <button id="newUsersButton" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newUsersModal">Invite new users</button>

                    <table id="users" class="table table-borderless caption-top mt-3">
                        <caption>List of users</caption>
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Name</th>
                            <th scope="col">Profile</th>
                            <th scope="col">Email</th>
                            <th scope="col">Role</th>
                            <th scope="col" class="text-end">Status</th>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
                <div class="mt-3 mb-3">
                    <button id="userButton" type="button" class="btn btn-primary" disabled>Save changes</button>
                </div>

                <div class="mt-5" id="item-user-pairs">
                    <h4>Forbidden pairs</h4>
                    <p>Match users that should never be drafted as pairs.</p>
                    <button id="addNewPairButton" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#forbiddenPairsModal">Add new pair</button>
                </div>

                <table id="forbiddenPairsTable" class="table table-borderless caption-top mt-3">
                    <caption>List of forbidden pairs</caption>
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col">Other Name</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-2">
        </div>
    </div>
    
    <!-- Dialog for adding new users -->
    <div class="modal" id="newUsersModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Select users that will not be drafted as pairs</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="newUsersForm">
                    <div class="modal-body">
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="newUserEmail" placeholder="name@example.com">
                            <label for="newUserEmail">Email address</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Invite</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- Dialog for forbidden pairs -->
    <div class="modal" id="forbiddenPairsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Select users that will not be drafted as pairs</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="forbiddenPairsForm">
                    <div class="modal-body">
                        <select class="form-select" id="forbiddenUser1" required>
                            <option selected value="">Choose...</option>
                        </select>
                        <select class="form-select" id="forbiddenUser2" required>
                            <option selected value="">Choose...</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Forbid</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="alert alert-dismissible collapse position-absolute bottom-0 start-50 translate-middle-x"
         role="alert">
        <span></span>
        <button type="button" class="btn-close" aria-label="Close"></button>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</body>

</html>